$(function(){$(".builderCartContent").load("index.php?route=product/dbuilder/cart",function(){$("#builder-selections").trigger("reset");var t=""})});$("body").on("blur","input, select",function(t){$(t.target).parent().parent().find(".text-danger").remove();t.target.checkValidity();$('<div class="text-danger text-center">'+t.target.validationMessage+"</div>").insertAfter(t.target)});$("#builder-selections").on("submit",function(t){t.preventDefault();$.ajax({url:"index.php?route=product/dbuilder/generateModel",type:"post",data:$("#builder-selections").serialize(),dataType:"json",beforeSend:function(){$(".alert-danger").remove();$(".text-danger").remove();$("#button-cart").toggleClass("disabled");$("#button-cart").data("original-text",$("#button-cart").html());$("#button-cart").html($("#button-cart").data("loading-text"))},complete:function(){$("#button-cart").html($("#button-cart").data("original-text"));$("#button-cart").toggleClass("disabled")},success:function(t){if(t["error"]){$("#builder-toolbox").parent().parent().prepend('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> '+t["error"]+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');$.each(t.errors,function(t,e){if($('input[name="'+t+'"]').length){$('input[name="'+t+'"]').after('<div class="text-danger text-center" id="error_product_group">'+e+"</div>")}else if($('select[name="'+t+'"]').length){$('select[name="'+t+'"]').after('<div class="text-danger text-center" id="error_product_group">'+e+"</div>")}});$("html, body").animate({scrollTop:$(".alert-danger").offset().top-100},500)}else{$.each(t["items"],function(e){var r=t["items"][e];r["product_group"]=$('input[name="product_group"]').val();if(r["quantity"]>0){r["quantity"]=r["quantity"]*$('input[name="quantity"]').val()}else{r["quantity"]=$('input[name="quantity"]').val()}add=add_to_cart(r)})}$("html, body").animate({scrollTop:$("#product_builder_tabs").offset().top-100},500)},error:function(t,e,r){$("#builder-toolbox").parent().parent().prepend('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> '+r+"\r\n"+t.statusText+"\r\n"+t.responseText+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');$("html, body").animate({scrollTop:$("#product_builder_tabs").offset().top-100},500)}})});$("body").on("change","select",function(){var t=$(this);if($("option:selected",this).attr("model_3d")){loadFurniture($("option:selected",this).attr("model_3d"))}else{update3D()}});function add_to_cart(t){if(t["quantity"]==0){t["quantity"]=1}$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:t,dataType:"json",beforeSend:function(){},complete:function(){$("#button-cart").button("reset")},success:function(t){if(t["error"]){if(t["error"]["option"]){for(i in t["error"]["option"]){var e=$("#OptionsModel #input-option"+i.replace("_","-"));if(e.parent().hasClass("input-group")){e.parent().after('<div class="text-danger text-center">'+t["error"]["option"][i]+"</div>")}else{e.after('<div class="text-danger text-center">'+t["error"]["option"][i]+"</div>")}}}if(t["error"]["recurring"]){$("select[name='recurring_id']").after('<div class="text-danger text-center">'+t["error"]["recurring"]+"</div>")}$(".text-danger").parent().addClass("has-error")}if(t["success"]){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t["total"]+"</span>");$("#cart > ul").load("index.php?route=common/cart/info ul li");$(".builderCartContent").load("index.php?route=product/dbuilder/cart",function(){});$("#OptionsModel").modal("hide")}$(document).delegate(".product-info-link","click",function(t){t.preventDefault();$("#modal-product-info").remove();var e=this;$.ajax({url:$(e).attr("data-info"),type:"get",dataType:"html",success:function(t){$("body").append(t);$("#modal-product-info").modal("show");$(".dc-pace-activity").remove()}})})},error:function(t,e,r){alert(r+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}function update3D(){var t=[];$("option:selected","#dynamic-form").each(function(){t.push($(this).parent().attr("name")+"-"+$(this).val())});updateFurniture(t)}jQuery(document).ready(function(t){"use strict";t(".customizer-toggle").on("click",function(){t(".customizer").toggleClass("open")})});jQuery(document).ready(function(t){"use strict";t(".offcanvas-shopping-cart-toggle").on("click",function(){t(".offcanvas-shopping-cart").toggleClass("open")})});
//# sourceMappingURL=dbuilder.min.js.map