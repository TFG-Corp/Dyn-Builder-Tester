{"version":3,"sources":["tfg_furniture_viewer.js"],"names":["WEBGL","isWebGLAvailable","document","body","appendChild","getWebGLErrorMessage","window","ImageBitmap","container","stats","clock","camera","controls","scene","renderer","furniture","GlobalFullscreenMode","defaults","background","playbackSpeed","actionStates","wireframe","skeleton","grid","addLights","exposure","gammaOutput","textureEncoding","ambientIntensity","ambientColor","directIntensity","Math","PI","directColor","bgColor1","bgColor2","init","animate","getElementById","THREE","Scene","PerspectiveCamera","clientWidth","clientHeight","position","set","lookAt","OrbitControls","add","TextureLoader","load","Clock","hemiLight","HemisphereLight","name","light1","AmbientLight","light2","DirectionalLight","WebGLRenderer","antialias","preserveDrawingBuffer","setPixelRatio","devicePixelRatio","setSize","physicallyCorrectLights","setClearColor","gammaFactor","toneMappingExposure","domElement","Stats","dom","addEventListener","onWindowResize","sceneWidth","sceneHeight","innerWidth","innerHeight","aspect","updateProjectionMatrix","requestAnimationFrame","undefined","render","update","loadFurniture","url","myRegex","fileRegex","filePath","exec","fileName","fileExtension","loader","ColladaLoader","collada","removeFromScene","traverse","child","isMesh","update3D","$","addClass","onProgress","xhr","lengthComputable","percentComplete","loaded","total","console","log","round","onError","Loader","Handlers","DDSLoader","MTLLoader","setPath","materials","preload","OBJLoader","setMaterials","object","FBXLoader","GLTFLoader","scenes","updateTextureEncoding","updateFurniture","layers","i","children","length","visible","j","saveAsImage","imgData","imgNode","strDownloadMime","strMime","toDataURL","saveFile","replace","e","strData","filename","link","createElement","download","href","click","removeChild","location","uri","remove","exportGLTF","binary","gltfExporter","GLTFExporter","options","parse","result","ArrayBuffer","saveArrayBuffer","output","JSON","stringify","saveString","exportCollada","exporter","ColladaExporter","data","textures","forEach","tex","ext","text","save","Blob","type","buffer","blob","style","display","URL","createObjectURL","openFullscreen","fullscreen_container","snapshot_btn","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","width","height","classList","bottom","fsChangeHandler","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fitCameraToFurniture","offset","boundingBox","Box3","setFromObject","center","getCenter","size","getSize","maxDim","max","x","y","z","fov","cameraZ","abs","tan","minZ","min","cameraToFarEdge","far","target","maxDistance","saveState","traverseMaterials","callback","node","Array","isArray","material","encoding","sRGBEncoding","LinearEncoding","map","emissiveMap","needsUpdate"],"mappings":"AAAA,aAEA,GAAIA,MAAMC,qBAAuB,MAAO,CAEpCC,SAASC,KAAKC,YAAYJ,MAAMK,wBAIpCC,OAAOC,YAAcD,OAAOC,aAAe,WACvC,OAAO,MAGX,IAAIC,UAAWC,MAAOC,MACtB,IAAIC,OAAQC,SAAUC,MAAOC,SAAUC,UACvC,IAAIC,qBAAuB,MAE3B,IAAIC,UAIAC,WAAY,MACZC,cAAe,EACfC,gBAEAC,UAAW,MACXC,SAAU,MACVC,KAAM,MAGNC,UAAW,KACXC,SAAU,EAEVC,YAAa,KAEbC,gBAAiB,SACjBC,iBAAkB,GAElBC,aAAc,SACdC,gBAAiB,GAAMC,KAAKC,GAC5BC,YAAa,SACbC,SAAU,UACVC,SAAU,WAGdC,OACAC,UAEA,SAASD,OACL5B,UAAYN,SAASoC,eAAe,gBAEpCzB,MAAQ,IAAI0B,MAAMC,MAGlB7B,OAAS,IAAI4B,MAAME,kBAAkB,GAAIjC,UAAUkC,YAAclC,UAAUmC,aAAc,GAAK,KAC9FhC,OAAOiC,SAASC,IAAI,IAAK,IAAK,KAC9BlC,OAAOmC,OAAO,EAAG,EAAG,GACpBlC,SAAW,IAAI2B,MAAMQ,cAAcpC,OAAQH,WAC3CK,MAAMmC,IAAIrC,QAKVE,MAAMK,YAAa,IAAIqB,MAAMU,eAAgBC,KAAK,mBAClDxC,MAAQ,IAAI6B,MAAMY,MAGlB,IAAIC,EAAY,IAAIb,MAAMc,gBAC1BD,EAAUE,KAAO,aACjBzC,MAAMmC,IAAII,GAEV,IAAIG,EAAS,IAAIhB,MAAMiB,aAAavC,SAASY,aAAcZ,SAASW,kBACpE2B,EAAOD,KAAO,gBACd3C,OAAOqC,IAAIO,GAEX,IAAIE,EAAS,IAAIlB,MAAMmB,iBAAiBzC,SAASgB,YAAahB,SAASa,iBACvE2B,EAAOb,SAASC,IAAI,GAAK,EAAG,MAC5BY,EAAOH,KAAO,aACd3C,OAAOqC,IAAIS,GAIX3C,SAAW,IAAIyB,MAAMoB,eAAeC,UAAW,KAAMC,sBAAuB,OAC5E/C,SAASgD,cAAcxD,OAAOyD,kBAC9BjD,SAASkD,QAAQxD,UAAUkC,YAAalC,UAAUmC,cAClD7B,SAASmD,wBAA0B,KACnCnD,SAASoD,cAAc,UACvBpD,SAASY,YAAcT,SAASS,YAChCZ,SAASqD,YAAc,IACvBrD,SAASsD,oBAAsBnD,SAASQ,SAExCjB,UAAUJ,YAAYU,SAASuD,YAG/B,UAAW,OAAW,YAAa,CAC/B5D,MAAQ,IAAI6D,MACZ9D,UAAUJ,YAAYK,MAAM8D,KAIhCjE,OAAOkE,iBAAiB,SAAUC,eAAgB,OAItD,SAASA,iBACL,IAAIC,EAAYC,EAEhB,GAAI3D,qBAAsB,CACtB0D,EAAapE,OAAOsE,WACpBD,EAAcrE,OAAOuE,gBAElB,CACHH,EAAalE,UAAUkC,YACvBiC,EAAcnE,UAAUmC,aAE5BhC,OAAOmE,OAASJ,EAAaC,EAC7BhE,OAAOoE,yBACPjE,SAASkD,QAAQU,EAAYC,GAGjC,SAAStC,UACL2C,sBAAsB3C,SAGtB,GAAItB,YAAckE,UAAW,EAI7BnE,SAASoE,OAAOrE,MAAOF,QACvB,UAAW,OAAW,YAAa,CAC/BF,MAAM0E,UAId,SAASC,cAAcC,GACnB,IAAIC,EAAU,kBACd,IAAIC,EAAY,QAChB,IAAIC,EAAWD,EAAUE,KAAKJ,GAAK,GACnC,IAAIK,EAAWJ,EAAQG,KAAKJ,GAAK,GACjC,IAAIM,EAAgBL,EAAQG,KAAKJ,GAAK,GAEtC,IAAIO,EACJ,OAAQD,GAEJ,IAAK,OAEDC,EAAS,IAAIrD,MAAMsD,cACnBD,EAAO1C,KAAKmC,EAAK,SAAUS,GACvBC,gBAAgBhF,WAChBA,UAAY+E,EAAQjF,MACpBE,UAAUiF,SAAS,SAAUC,GACzB,GAAIA,EAAMC,OAAQ,KAKtBC,WACAtF,MAAMmC,IAAIjC,WACVqF,EAAE,eAAeC,SAAS,UAE9B,MAEJ,IAAK,OACD,IAAIC,EAAa,SAAUC,GACvB,GAAIA,EAAIC,iBAAkB,CACtB,IAAIC,EAAkBF,EAAIG,OAASH,EAAII,MAAQ,IAC/CC,QAAQC,IAAI9E,KAAK+E,MAAML,EAAiB,GAAK,kBAGrD,IAAIM,EAAU,aAEdxE,MAAMyE,OAAOC,SAASjE,IAAI,UAAW,IAAIT,MAAM2E,YAE/C,IAAI3E,MAAM4E,WACLC,QAAQ5B,GACRtC,KAAKwC,EAAW,OAAQ,SAAU2B,GAC/BA,EAAUC,WACV,IAAI/E,MAAMgF,WACLC,aAAaH,GACbD,QAAQ5B,GACRtC,KAAKwC,EAAW,OAAQ,SAAU+B,GAC/B1B,gBAAgBhF,WAChBA,UAAY0G,EACZ1G,UAAUiF,SAAS,SAAUC,GACzB,GAAIA,EAAMC,OAAQ,KAKtBC,WACAtF,MAAMmC,IAAIjC,WACVqF,EAAE,eAAeC,SAAS,SAC3BC,EAAYS,KAE3B,MAEJ,IAAK,OACDnB,EAAS,IAAIrD,MAAMmF,UACnB9B,EAAO1C,KAAKmC,EAAK,SAAUoC,GACvB1B,gBAAgBhF,WAChBA,UAAY0G,EACZ1G,UAAUiF,SAAS,SAAUC,GACzB,GAAIA,EAAMC,OAAQ,KAKtBC,WACAtF,MAAMmC,IAAIjC,WACVqF,EAAE,eAAeC,SAAS,UAE9B,MAEJ,IAAK,QACL,IAAK,OACDT,GAAS,IAAIrD,MAAMoF,YAAaP,QAAQ5B,GACxCI,EAAO1C,KAAKwC,EAAWC,EAAe,SAAU8B,GAC5C1B,gBAAgBhF,WAChBA,UAAY0G,EAAOG,OAAO,GAC1BH,EAAO5G,MAAMmF,SAAS,SAAUC,GAC5B,GAAIA,EAAMC,OAAQ,KAMtBrF,MAAMmC,IAAIyE,EAAO5G,OACjBsF,WACAC,EAAE,eAAeC,SAAS,UAE9B,MACJ,QACIO,QAAQC,IAAI,iCACZ,MAGRgB,wBAMJ,SAASC,gBAAgBC,GACrB,GAAIhH,YAAckE,UAAW,CACzB,IAAK,IAAI+C,EAAI,EAAGA,EAAIjH,UAAUkH,SAASC,OAAQF,IAAK,CAChDjH,UAAUkH,SAASD,GAAGG,QAAU,MAEpC,IAAK,IAAIH,EAAI,EAAGA,EAAIjH,UAAUkH,SAASC,OAAQF,IAAK,CAChD,IAAK,IAAII,EAAI,EAAGA,EAAIL,EAAOG,OAAQE,IAAK,CACpC,GAAIrH,UAAUkH,SAASD,GAAG1E,OAASyE,EAAOK,GAAI,CAC1CrH,UAAUkH,SAASD,GAAGG,QAAU,SAOpD,SAASE,cACL,IAAIC,EAASC,EACb,IAAIC,EAAkB,qBACtB,IACI,IAAIC,EAAU,aACdH,EAAUxH,SAASuD,WAAWqE,UAAUD,GAExCE,SAASL,EAAQM,QAAQH,EAASD,GAAkB,iBAEtD,MAAOK,GACLjC,QAAQC,IAAIgC,IAKpB,IAAIF,SAAW,SAAUG,EAASC,GAC9B,IAAIC,EAAO9I,SAAS+I,cAAc,KAClC,UAAWD,EAAKE,WAAa,SAAU,CACnChJ,SAASC,KAAKC,YAAY4I,GAC1BA,EAAKE,SAAWH,EAChBC,EAAKG,KAAOL,EACZE,EAAKI,QACLlJ,SAASC,KAAKkJ,YAAYL,OACvB,CACHM,SAASV,QAAQW,OAIzB,SAASxD,gBAAgB0B,GACrB5G,MAAM2I,OAAO/B,GACbpF,UAGJ,SAASoH,WAAWC,GAChBA,EAASA,GAAU,KACnB,IAAIC,EAAe,IAAIpH,MAAMqH,aAC7B,IAAIC,GACAH,OAAQA,GAEZC,EAAaG,MAAM/I,UAAUkH,SAAU,SAAU8B,GAC7C,GAAIA,aAAkBC,YAAa,CAC/BC,gBAAgBF,EAAQ,qBACrB,CACH,IAAIG,EAASC,KAAKC,UAAUL,EAAQ,KAAM,GAC1CnD,QAAQC,IAAIqD,GACZG,WAAWH,EAAQ,oBAExBL,GAGP,SAASS,gBACL,IAAIC,EAAW,IAAIhI,MAAMiI,gBACzB,IAAIT,EAASQ,EAAST,MAAM/I,WAC5BsJ,WAAWN,EAAOU,KAAM,iBACxBV,EAAOW,SAASC,QAAQ,SAAUC,GAC9BX,gBAAgBW,EAAIH,KAAMG,EAAItH,KAAO,IAAMsH,EAAIC,OAIvD,SAASR,WAAWS,EAAM/B,GACtBgC,KAAK,IAAIC,MAAMF,IAAQG,KAAM,eAAgBlC,GAGjD,SAASkB,gBAAgBiB,EAAQnC,GAC7BgC,KAAK,IAAIC,MAAME,IAAUD,KAAM,6BAA8BlC,GAGjE,SAASgC,KAAKI,EAAMpC,GAChB,IAAIC,EAAO9I,SAAS+I,cAAc,KAClCD,EAAKoC,MAAMC,QAAU,OACrB7K,UAAUJ,YAAY4I,GAEtBA,EAAKG,KAAOmC,IAAIC,gBAAgBJ,GAChCnC,EAAKE,SAAWH,EAChBC,EAAKI,QACLJ,EAAKQ,SAGT,SAASgC,iBACL,IAAIC,EAAuBvL,SAASoC,eAAe,wBACnD,IAAIoJ,EAAexL,SAASoC,eAAe,qBAE3C,GAAImJ,EAAqBE,kBAAmB,CACxCF,EAAqBE,yBAClB,GAAIF,EAAqBG,qBAAsB,CAClDH,EAAqBG,4BAClB,GAAIH,EAAqBI,wBAAyB,CACrDJ,EAAqBI,+BAClB,GAAIJ,EAAqBK,oBAAqB,CACjDL,EAAqBK,sBAGzB9K,qBAAuB,KACvBR,UAAU4K,MAAMW,MAAQ,OACxBvL,UAAU4K,MAAMY,OAAS,OACzBxL,UAAUyL,UAAUzC,OAAO,QAC3BkC,EAAaN,MAAMc,OAAS,OAE5B5L,OAAOkE,iBAAiB,SAAUC,eAAgB,OAItD,GAAIvE,SAASsE,iBAAkB,CAC3BtE,SAASsE,iBAAiB,yBAA0B2H,gBAAiB,OACrEjM,SAASsE,iBAAiB,sBAAuB2H,gBAAiB,OAClEjM,SAASsE,iBAAiB,mBAAoB2H,gBAAiB,OAC/DjM,SAASsE,iBAAiB,qBAAsB2H,gBAAiB,OAGrE,SAASA,kBACL,IAAIT,EAAexL,SAASoC,eAAe,qBAC3C,GAAIpC,SAASkM,oBAAsBlM,SAASmM,eAAiBnM,SAASoM,sBAAwBrH,UAAW,CAGrGjE,qBAAuB,KACvByD,qBACG,CAGHzD,qBAAuB,MACvBR,UAAU4K,MAAQ,KAClB5K,UAAUyL,UAAUjJ,IAAI,QACxB0I,EAAaN,MAAMc,OAAS,QAE5BzH,kBAKR,SAAS8H,qBAAqBC,GAE1BA,EAASA,GAAU,KAEnB,IAAIC,EAAc,IAAIlK,MAAMmK,KAG5BD,EAAYE,cAAc5L,WAE1B,IAAI6L,EAASH,EAAYI,YAEzB,IAAIC,EAAOL,EAAYM,UAGvB,IAAIC,EAASjL,KAAKkL,IAAIH,EAAKI,EAAGJ,EAAKK,EAAGL,EAAKM,GAC3C,IAAIC,EAAM1M,OAAO0M,KAAOtL,KAAKC,GAAK,KAClC,IAAIsL,EAAUvL,KAAKwL,IAAIP,EAAS,EAAIjL,KAAKyL,IAAIH,EAAM,IAEnDC,GAAWd,EAEX7L,OAAOiC,SAASwK,EAAIE,EAEpB,IAAIG,EAAOhB,EAAYiB,IAAIN,EAC3B,IAAIO,EAAmBF,EAAO,GAAMA,EAAOH,EAAUA,EAAUG,EAE/D9M,OAAOiN,IAAMD,EAAkB,EAC/BhN,OAAOoE,yBAEP,GAAInE,SAAU,CAGVA,SAASiN,OAASjB,EAGlBhM,SAASkN,YAAcH,EAAkB,EAEzC/M,SAASmN,gBAEN,CAEHpN,OAAOmC,OAAO8J,IAKtB,SAASoB,kBAAmBvG,EAAQwG,GAChCxG,EAAOzB,SAAUkI,IACb,IAAKA,EAAKhI,OAAQ,OACtB,MAAMmB,EAAY8G,MAAMC,QAAQF,EAAKG,UAC/BH,EAAKG,UACJH,EAAKG,UACZhH,EAAUsD,QAAQsD,KAItB,SAASpG,wBACL,IAAIyG,EAAWrN,SAASU,kBAAoB,OAASY,MAAMgM,aAAehM,MAAMiM,eAChFR,kBAAkBjN,UAAYsN,IAC1B,GAAIA,EAASI,IAAKJ,EAASI,IAAIH,SAAWA,EAC9C,GAAID,EAASK,YAAaL,EAASK,YAAYJ,SAAWA,EAC1D,GAAID,EAASI,KAAOJ,EAASK,YAAaL,EAASM,YAAc"}