THREE.MTLLoader=function(r){this.manager=r!==undefined?r:THREE.DefaultLoadingManager};THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(r,a,e,t){var s=this;var i=this.path===undefined?THREE.LoaderUtils.extractUrlBase(r):this.path;var n=new THREE.FileLoader(this.manager);n.setPath(this.path);n.load(r,function(r){a(s.parse(r,i))},e,t)},setPath:function(r){this.path=r;return this},setResourcePath:function(r){this.resourcePath=r;return this},setTexturePath:function(r){console.warn("THREE.MTLLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(r)},setCrossOrigin:function(r){this.crossOrigin=r;return this},setMaterialOptions:function(r){this.materialOptions=r;return this},parse:function(r,a){var e=r.split("\n");var t={};var s=/\s+/;var i={};for(var n=0;n<e.length;n++){var o=e[n];o=o.trim();if(o.length===0||o.charAt(0)==="#"){continue}var h=o.indexOf(" ");var p=h>=0?o.substring(0,h):o;p=p.toLowerCase();var u=h>=0?o.substring(h+1):"";u=u.trim();if(p==="newmtl"){t={name:u};i[u]=t}else{if(p==="ka"||p==="kd"||p==="ks"||p==="ke"){var l=u.split(s,3);t[p]=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])]}else{t[p]=u}}}var c=new THREE.MTLLoader.MaterialCreator(this.resourcePath||a,this.materialOptions);c.setCrossOrigin(this.crossOrigin);c.setManager(this.manager);c.setMaterials(i);return c}};THREE.MTLLoader.MaterialCreator=function(r,a){this.baseUrl=r||"";this.options=a;this.materialsInfo={};this.materials={};this.materialsArray=[];this.nameLookup={};this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide;this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping};THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(r){this.crossOrigin=r;return this},setManager:function(r){this.manager=r},setMaterials:function(r){this.materialsInfo=this.convert(r);this.materials={};this.materialsArray=[];this.nameLookup={}},convert:function(r){if(!this.options)return r;var a={};for(var e in r){var t=r[e];var s={};a[e]=s;for(var i in t){var n=true;var o=t[i];var h=i.toLowerCase();switch(h){case"kd":case"ka":case"ks":if(this.options&&this.options.normalizeRGB){o=[o[0]/255,o[1]/255,o[2]/255]}if(this.options&&this.options.ignoreZeroRGBs){if(o[0]===0&&o[1]===0&&o[2]===0){n=false}}break;default:break}if(n){s[h]=o}}}return a},preload:function(){for(var r in this.materialsInfo){this.create(r)}},getIndex:function(r){return this.nameLookup[r]},getAsArray:function(){var r=0;for(var a in this.materialsInfo){this.materialsArray[r]=this.create(a);this.nameLookup[a]=r;r++}return this.materialsArray},create:function(r){if(this.materials[r]===undefined){this.createMaterial_(r)}return this.materials[r]},createMaterial_:function(r){var a=this;var e=this.materialsInfo[r];var t={name:r,side:this.side};function s(r,a){if(typeof a!=="string"||a==="")return"";if(/^https?:\/\//i.test(a))return a;return r+a}function i(r,e){if(t[r])return;var i=a.getTextureParams(e,t);var n=a.loadTexture(s(a.baseUrl,i.url));n.repeat.copy(i.scale);n.offset.copy(i.offset);n.wrapS=a.wrap;n.wrapT=a.wrap;t[r]=n}for(var n in e){var o=e[n];var h;if(o==="")continue;switch(n.toLowerCase()){case"kd":t.color=(new THREE.Color).fromArray(o);break;case"ks":t.specular=(new THREE.Color).fromArray(o);break;case"ke":t.emissive=(new THREE.Color).fromArray(o);break;case"map_kd":i("map",o);break;case"map_ks":i("specularMap",o);break;case"map_ke":i("emissiveMap",o);break;case"norm":i("normalMap",o);break;case"map_bump":case"bump":i("bumpMap",o);break;case"map_d":i("alphaMap",o);t.transparent=true;break;case"ns":t.shininess=parseFloat(o);break;case"d":h=parseFloat(o);if(h<1){t.opacity=h;t.transparent=true}break;case"tr":h=parseFloat(o);if(this.options&&this.options.invertTrProperty)h=1-h;if(h>0){t.opacity=1-h;t.transparent=true}break;default:break}}this.materials[r]=new THREE.MeshPhongMaterial(t);return this.materials[r]},getTextureParams:function(r,a){var e={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)};var t=r.split(/\s+/);var s;s=t.indexOf("-bm");if(s>=0){a.bumpScale=parseFloat(t[s+1]);t.splice(s,2)}s=t.indexOf("-s");if(s>=0){e.scale.set(parseFloat(t[s+1]),parseFloat(t[s+2]));t.splice(s,4)}s=t.indexOf("-o");if(s>=0){e.offset.set(parseFloat(t[s+1]),parseFloat(t[s+2]));t.splice(s,4)}e.url=t.join(" ").trim();return e},loadTexture:function(r,a,e,t,s){var i;var n=THREE.Loader.Handlers.get(r);var o=this.manager!==undefined?this.manager:THREE.DefaultLoadingManager;if(n===null){n=new THREE.TextureLoader(o)}if(n.setCrossOrigin)n.setCrossOrigin(this.crossOrigin);i=n.load(r,e,t,s);if(a!==undefined)i.mapping=a;return i}};
//# sourceMappingURL=MTLLoader.min.min.js.map