THREE.DDSLoader=function(r){THREE.CompressedTextureLoader.call(this,r);this._parser=THREE.DDSLoader.parse};THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype);THREE.DDSLoader.prototype.constructor=THREE.DDSLoader;THREE.DDSLoader.parse=function(r,a){var e={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};var t=542327876;var o=1,v=2,n=4,m=8,i=4096,s=131072,p=524288,E=8388608;var u=8,d=4194304,c=4096;var T=512,f=1024,h=2048,D=4096,C=8192,R=16384,l=32768,H=2097152;var S=1,L=2,_=4,A=64,b=512,w=131072;function g(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function x(r){return String.fromCharCode(r&255,r>>8&255,r>>16&255,r>>24&255)}function y(r,a,e,t){var o=e*t*4;var v=new Uint8Array(r,a,o);var n=new Uint8Array(o);var m=0;var i=0;for(var s=0;s<t;s++){for(var p=0;p<e;p++){var E=v[i];i++;var u=v[i];i++;var d=v[i];i++;var c=v[i];i++;n[m]=d;m++;n[m]=u;m++;n[m]=E;m++;n[m]=c;m++}}return n}var F=g("DXT1");var X=g("DXT3");var B=g("DXT5");var G=g("ETC1");var M=31;var U=0;var k=1;var I=2;var j=3;var O=4;var q=7;var z=20;var J=21;var K=22;var N=23;var P=24;var Q=25;var V=26;var W=27;var Y=28;var Z=29;var $=30;var rr=new Int32Array(r,0,M);if(rr[U]!==t){console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header.");return e}if(!rr[z]&_){console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.");return e}var ar;var er=rr[J];var tr=false;switch(er){case F:ar=8;e.format=THREE.RGB_S3TC_DXT1_Format;break;case X:ar=16;e.format=THREE.RGBA_S3TC_DXT3_Format;break;case B:ar=16;e.format=THREE.RGBA_S3TC_DXT5_Format;break;case G:ar=8;e.format=THREE.RGB_ETC1_Format;break;default:if(rr[K]===32&&rr[N]&16711680&&rr[P]&65280&&rr[Q]&255&&rr[V]&4278190080){tr=true;ar=64;e.format=THREE.RGBAFormat}else{console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",x(er));return e}}e.mipmapCount=1;if(rr[I]&s&&a!==false){e.mipmapCount=Math.max(1,rr[q])}var or=rr[Y];e.isCubemap=or&T?true:false;if(e.isCubemap&&(!(or&f)||!(or&h)||!(or&D)||!(or&C)||!(or&R)||!(or&l))){console.error("THREE.DDSLoader.parse: Incomplete cubemap faces");return e}e.width=rr[O];e.height=rr[j];var vr=rr[k]+4;var nr=e.isCubemap?6:1;for(var mr=0;mr<nr;mr++){var ir=e.width;var sr=e.height;for(var pr=0;pr<e.mipmapCount;pr++){if(tr){var Er=y(r,vr,ir,sr);var ur=Er.length}else{var ur=Math.max(4,ir)/4*Math.max(4,sr)/4*ar;var Er=new Uint8Array(r,vr,ur)}var dr={data:Er,width:ir,height:sr};e.mipmaps.push(dr);vr+=ur;ir=Math.max(ir>>1,1);sr=Math.max(sr>>1,1)}}return e};
//# sourceMappingURL=DDSLoader.min.min.js.map